---
export interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  ogImage?: string;
}

const { 
  title = "Country Explorer - Interactive World Countries Database & Geography Quiz",
  description = "Explore 250+ countries with interactive search, filters, and geography quiz. Discover country flags, capitals, currencies, languages and test your knowledge with fun educational quizzes!",
  keywords = "countries, geography, world atlas, flags, capitals, currency, language, quiz, education, interactive map, country data, REST API",
  ogImage = import.meta.env.BASE_URL + "favicon.svg"
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Country Explorer Team" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href={import.meta.env.BASE_URL + 'favicon.svg'} />
    <link rel="icon" type="image/x-icon" href={import.meta.env.BASE_URL + 'favicon.ico'} />
    <link rel="apple-touch-icon" sizes="180x180" href={import.meta.env.BASE_URL + 'favicon.svg'} />
    <link rel="icon" type="image/svg+xml" sizes="32x32" href={import.meta.env.BASE_URL + 'favicon.svg'} />
    <link rel="icon" type="image/svg+xml" sizes="16x16" href={import.meta.env.BASE_URL + 'favicon.svg'} />
    <meta name="msapplication-TileImage" content={import.meta.env.BASE_URL + 'favicon.svg'} />
    <meta name="msapplication-TileColor" content="#64748b" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(ogImage, Astro.url)} />
    <meta property="og:site_name" content="Country Explorer" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={new URL(ogImage, Astro.url)} />
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#64748b" />
    <meta name="application-name" content="Country Explorer" />
    <meta name="apple-mobile-web-app-title" content="Country Explorer" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Country Explorer",
        "description": "Interactive world countries database with educational geography quiz features",
        "url": "{canonicalURL}",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Browse 250+ countries with detailed information",
          "Interactive search by name, capital, currency, language",
          "Advanced filtering and sorting options",
          "Country flags and comprehensive data",
          "Educational geography quiz games",
          "Dark mode support",
          "Mobile responsive design",
          "Real-time search functionality"
        ],
        "creator": {
          "@type": "Organization",
          "name": "Country Explorer Team"
        }
      }
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Lucide Icons (Professional icon library) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Initialize theme before page renders to prevent flash -->
    <script is:inline>
      (function() {
        const theme = localStorage.getItem('theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
  </head>
  
  <body class="h-full bg-gray-50 dark:bg-gray-900 font-sans text-gray-900 dark:text-white antialiased transition-colors duration-300">
    <div class="min-h-full flex flex-col">
      <slot />
    </div>
    
    <!-- Global styles for smooth transitions -->
    <style is:global>
      * {
        scroll-behavior: smooth;
      }
      
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      
      ::-webkit-scrollbar-track {
        @apply bg-gray-100 dark:bg-gray-800;
      }
      
      ::-webkit-scrollbar-thumb {
        @apply bg-gray-400 dark:bg-gray-600 rounded-full;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-500 dark:bg-gray-500;
      }
      
      /* Focus styles */
      .focus-visible:focus {
        @apply outline-none ring-2 ring-primary-500 ring-offset-2 dark:ring-offset-gray-900;
      }
      
      /* Animation utilities */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
      }
      
      /* Smooth state transitions */
      .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
      }
    </style>
  </body>
</html>